## v0.3.8.1 - 2025-08-31

**核心更新：解析流程重构，引入 JSON 作为中间数据**

以前是对txt进行格式的合法性验证后，把时间段转换为时间间隔，但仍然是txt，这不利于解析。

**主要变化：**

* **引入 JSON 作为中间数据格式**：项目现在将纯文本 (`.txt`) 数据首先转换为 **JSON** 格式，然后再进行解析和数据库存储。同时验证数据的合法性也是用json进行验证，而不是验证txt。这样验证也更高效。
* **优化解析逻辑**：旧版本直接解析复杂的纯文本数据，导致解析器实现复杂且难以维护。新版本利用 JSON 结构清晰的优势，使解析逻辑变得更加简单、稳定。

## v0.3.13.0 - 2025-09-12

**核心更新：活动支持备注**

支持; // #来对活动进行备注，只完成了转换为json这一步骤
### 0.3.13.1
完成数据库插入以及格式化输出(md,typst)
完成log生成备注

### 0.3.13.2
优化md备注输出格式

### 0.3.13.3
优化typ格式颜色
// 【Typst格式化关键点】开发者备注,不要删除我
// Typst的 #text(...) 块会将其中的所有内容视为一个不可分割的整体进行渲染。
// 为了让备注作为子列表项正确地换行和缩进，必须满足以下两个条件：
// 1. 将活动行和备注行拼接成一个包含换行符(\n)的多行字符串。
// 2. 在这个字符串内部，使用空格精确地控制好每一行的缩进级别。
// 最后，将这个构造好的多行字符串完整地放入 #text(...) 的内容区域 `[...]` 中。
// 这样，Typst才能在应用颜色的同时，正确解析内部的列表层级结构。例如
/*
#text(rgb("#AAAAAA"))[
+ 12:34 - 14:03 (1h 29m): routine_toilet
    + *Activity Remark*: 先輩、好きです！ 私と付き合ってください！
]
而不是
#text(rgb("#AAAAAA"))[+ 12:34 - 14:03 (1h 29m): routine_toilet
  + *Activity Remark*: 先輩、好きです！ 私と付き合ってください！]
*/


